using UnityEngine;

[RequireComponent(typeof(Rigidbody2D))]
public class Tank : MonoBehaviour
{
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    
    #region public methods
    
    public void Init(IInputProvider iInputProvider, float movingSpeed, float rotationSpeed)
    {
        _iInputProvider = iInputProvider;
        _movingSpeed = movingSpeed;
        _rotationSpeed = rotationSpeed;
    }

    #endregion

    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////

    #region MonoDevelop

    private void Update()
    {
        Vector2 dir = Utils.DegreesToVector2(-transform.localEulerAngles.z);
        rigidbody2D.velocity = dir * _movingSpeed * _iInputProvider.InputY;

        rigidbody2D.angularVelocity = -_rotationSpeed * _iInputProvider.InputX;
    }

    #endregion
    
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    
    #region private members

    private IInputProvider _iInputProvider;
    private float _movingSpeed;
    private float _rotationSpeed;

    #endregion

    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
}
