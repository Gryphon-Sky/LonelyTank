using UnityEngine;

public class World : ObjectsSet<Chunk, Chunk.Data>
{
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    
    #region ObjectsSet
    
    protected override GameObject ObjectPrefab { get { return Settings.Instance.ChunkPrefab; } }

    protected override void Awake()
    {
        base.Awake();
    }
    
    protected override void Create()
    {
        base.Create();
        EnlargeAround(0, 0);
    }
    
    #endregion
    
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    
    #region public methods
    
    public void OnTankEnteredToChunk(Chunk chunk)
    {
        Position pos = chunk.GetPosition();
        EnlargeAround(pos.X, pos.Y);
    }

    #endregion
    
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
    
    #region private methods
    
    private void EnlargeAround(int x, int y)
    {
        for(int j = y - 1; j <= y + 1; ++j)
        {
            for(int i = x - 1; i <= x + 1; ++i)
            {
                AddIfNeeded(new Position(i, j));
            }
        }
    }

    #endregion
    
    ////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////
}